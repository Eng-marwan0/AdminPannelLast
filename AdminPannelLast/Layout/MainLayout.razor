@inherits LayoutComponentBase
@inject LanguageService Lang

<div dir="@Lang.Direction" class="layout">

    <!-- ========== SIDEBAR ========== -->
    <aside class="sidebar @(IsMini ? "mini" : "")">

        <!-- عنوان القائمة -->
        <div class="sidebar-header">
            <span class="title">@T("Menu", "القائمة")</span>

            <button class="toggle-btn" @onclick="ToggleSidebar">
                @(IsMini ? "⮜" : "⮞")
            </button>
        </div>

        <!-- روابط القائمة -->
        <nav class="menu">
            <a href="/dashboard"><span class="icon">📊</span> <span class="label @(IsMini ? "hide" : "")">@T("Dashboard", "لوحة التحكم")</span></a>
            <a href="/orders"><span class="icon">📦</span> <span class="label @(IsMini ? "hide" : "")">@T("Orders", "الطلبات")</span></a>
            <a href="/users"><span class="icon">👥</span> <span class="label @(IsMini ? "hide" : "")">@T("Users", "المستخدمون")</span></a>
            <a href="/delivery"><span class="icon">🚚</span> <span class="label @(IsMini ? "hide" : "")">@T("Delivery", "شركات التوصيل")</span></a>
        </nav>

        <!-- اللغة أسفل القائمة -->
        <div class="sidebar-lang">
            <button @onclick="@(() => ChangeLang(" ar"))">AR</button>
            <button @onclick="@(() => ChangeLang(" en"))">EN</button>
        </div>

    </aside>

    <!-- ========== MAIN AREA ========== -->
    <div class="main">

        <!-- الشريط العلوي -->
        <header class="topbar">

            <button class="menu-btn" @onclick="ToggleSidebar">☰</button>

            <span class="top-title">@T("Admin Panel", "لوحة الإدارة")</span>

            <button class="lang-btn" @onclick="ToggleLanguage">
                🌐 @Lang.Language.ToUpper()
            </button>

        </header>

        <!-- محتوى الصفحات -->
        <main>
            @Body
        </main>

    </div>

</div>

@code {
    bool IsMini = false;

    void ToggleSidebar() => IsMini = !IsMini;

    void ToggleLanguage()
        => ChangeLang(Lang.Language == "ar" ? "en" : "ar");

    void ChangeLang(string lang)
    {
        Lang.SetLanguage(lang);
        StateHasChanged();
    }

    string T(string en, string ar)
        => Lang.Language == "ar" ? ar : en;
}
